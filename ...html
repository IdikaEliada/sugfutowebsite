<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Student Application</title>
  <style>
    body {font-family: Arial; max-width: 500px; margin: 40px auto; padding: 20px; background:#f9f9f9;}
    input, textarea {width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #ccc; border-radius: 4px;}
    button {background: #25D366; color: white; padding: 14px; border: none; border-radius: 4px; cursor: pointer; font-size:16px;}
    #status {margin-top: 15px; padding: 12px; border-radius: 4px; font-weight: bold;}
    .success {background:#d4edda; color:#155724;}
    .error {background:#f8d7da; color:#721c24;}
  </style>
</head>
<body>

<h2>Student Application Form</h2>

<form id="contactForm">
  <input type="text" name="name" placeholder="Full Name" required>
  <input type="text" name="level" placeholder="Level (e.g. 300)" required>
  <input type="text" name="faculty" placeholder="Faculty" required>
  <input type="text" name="department" placeholder="Department" required>
  <textarea name="message" placeholder="Reasons for Applying" rows="3" required></textarea>
  <input type="tel" name="phone" placeholder="Contact Phone" required>
  <button type="submit">Submit Application</button>
</form>

<div id="status"></div>

<script>
  // ←←← PASTE YOUR **NEW** MAKE.COM WEBHOOK URL HERE ←←←
  const MAKE_WEBHOOK = 'https://hook.eu2.make.com/ehv8owbn441rgalatugmahjasoyja3g5';

  const form = document.getElementById('contactForm');
  const status = document.getElementById('status');

  form.addEventListener('submit', async (e) => {
    e.preventDefault();
    status.textContent = 'Sending...';
    status.className = '';

    const data = {
      name: form.name.value.trim(),
      level: form.level.value.trim(),
      faculty: form.faculty.value.trim(),
      department: form.department.value.trim(),
      message: form.message.value.trim(),
      phone: form.phone.value.trim()
    };

    try {
      const response = await fetch(MAKE_WEBHOOK, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(data)
      });

      // Read response text for Make.com error messages
      const text = await response.text();

      if (response.ok) {
        status.textContent = 'Success! Sent to WhatsApp.';
        status.className = 'success';
        form.reset();
      } else {
        throw new Error(`HTTP ${response.status}: ${text || response.statusText}`);
      }
    } catch (err) {
      // SHOW ERROR ON PAGE
      status.textContent = `ERROR: ${err.message}`;
      status.className = 'error';

      // LOG FULL ERROR IN CONSOLE (F12)
      console.error('Fetch failed:', err);
      console.error('Webhook URL:', MAKE_WEBHOOK);
      console.error('Data sent:', data);
    }
  });
</script>

</body>
</html>